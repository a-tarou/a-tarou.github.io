<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥³å„ªåé‘‘ï¼ˆå­¦ç¿’ã‚µã‚¤ãƒˆï¼‰</title>

<style>
/* CSSã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã‹ã‚‰ */
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    padding: 0;
    background-color: #f4f4f4;
}

.search-area {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

.input-group {
    margin-bottom: 15px;
}

.input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.input-group input[type="number"], .input-group select {
    padding: 8px;
    margin-right: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

#search-button {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

#search-button:hover {
    background-color: #0056b3;
}
</style>

</head>
<body>
    <h1>å¥³å„ªåé‘‘ã‚µã‚¤ãƒˆã¸ã‚ˆã†ã“ãï¼</h1>
    <p>ã“ã®ã‚µã‚¤ãƒˆã¯ã€APIã‚’åˆ©ç”¨ã—ãŸå¥³å„ªæ¤œç´¢æ©Ÿèƒ½ã®å­¦ç¿’ç”¨ã‚µã‚¤ãƒˆã§ã™ã€‚</p>
    
    <div class="search-area">
        <h2>å¥³å„ªæ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ </h2>
        <div class="input-group">
            <label for="height">èº«é•· (cm):</label>
            <input type="number" id="height_min" placeholder="æœ€ä½èº«é•·" min="100" max="200" style="width: 80px;">
            <span>ã€œ</span>
            <input type="number" id="height_max" placeholder="æœ€é«˜èº«é•·" min="100" max="200" style="width: 80px;">
        </div>

        <div class="input-group">
            <label for="cup">ã‚«ãƒƒãƒ—æ•°:</label>
            <select id="cup">
                <option value="">ã™ã¹ã¦</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="G">G</option>
                <option value="H">H</option>
                <option value="I">I</option>
                <option value="J">J</option>
                <option value="K">K</option>
                <option value="L">L</option>
                <option value="Lä»¥ä¸Š">Lä»¥ä¸Š</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="age">å¹´é½¢:</label>
            <input type="number" id="age_min" placeholder="æœ€ä½å¹´é½¢" min="18" style="width: 80px;">
            <span>ã€œ</span>
            <input type="number" id="age_max" placeholder="æœ€é«˜å¹´é½¢" min="18" style="width: 80px;">
        </div>
        
        <button id="search-button" onclick="fetchActressData()">æ¤œç´¢ã™ã‚‹</button>
    </div>

    <hr>

    <div class="actress-list">
        <h2>æ¤œç´¢çµæœ</h2>
        <p id="loading-message">ã“ã“ã«å¥³å„ªã•ã‚“ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚FANZAã®æ‰¿èªã‚’å¾…ã£ã¦ã„ã¾ã™...</p>
    </div>
    
    <script>
    // -----------------------------------------------------------
    // ç‹¬è‡ªã®æ¤œç´¢ã‚¿ã‚°ç”¨ãƒ‡ãƒ¼ã‚¿ (è¦æœ›â‘¢, â‘£)
    // æ‰¿èªå¾Œã€APIãƒ‡ãƒ¼ã‚¿ã¨ç…§åˆã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚
    // -----------------------------------------------------------
    // â˜…æ³¨: ã“ã‚Œã¯ã€ã‚ãªãŸã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®æƒ…å ±ã‚’å…ƒã«ã—ãŸä»®ã®ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚â˜…
    const localActressData = [
        { name: "çŸ³å· æ¾ª", bodyType: "ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼", genre: ["å¯æ„›ã„ç³»", "æ¸…æ¥šç³»"] },
        { name: "æ²³åŒ— å½©ä¼½ï¼ˆæ²³åŒ— å½©èŠ±ï¼‰", bodyType: "ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼", genre: ["ç¾äººç³»", "æ¸…æ¥šç³»"] },
        { name: "ç€¬æˆ¸ ç’°å¥ˆ", bodyType: "ã‚°ãƒ©ãƒãƒ¼", genre: ["æ¸…æ¥šç³»", "å¯æ„›ã„ç³»"] },
    ];

    // -----------------------------------------------------------
    // æ¤œç´¢ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
    // -----------------------------------------------------------
    function fetchActressData() {
        // ğŸš¨ æ‰¿èªå¾Œã€ã“ã“ã‚’ã‚ãªãŸã®ã‚­ãƒ¼ã«ç½®ãæ›ãˆã¾ã™ ğŸš¨
        const CLIENT_ID = "[ã‚ãªãŸã®Client ID]"; 
        const AFFILIATE_ID = "[ã‚ãªãŸã®Affiliate ID]";
        
        // æ¤œç´¢æ¡ä»¶ã®å–å¾—
        const heightMin = document.getElementById('height_min').value;
        const heightMax = document.getElementById('height_max').value;
        let cup = document.getElementById('cup').value;
        const ageMin = document.getElementById('age_min').value;
        const ageMax = document.getElementById('age_max').value;

        // FANZA APIã®åŸºæœ¬è¨­å®š
        const API_ENDPOINT = "https://api.dmm.com/affiliate/v3/ItemList";
        const keyParams = `api_id=${CLIENT_ID}&affiliate_id=${AFFILIATE_ID}`;
        
        // æ¤œç´¢æ¡ä»¶ã‚’çµ„ã¿ç«‹ã¦ã‚‹
        let searchParams = 'site=DMM.R18&service=digital&hits=50&sort=rank&keyword=å¥³å„ª';
        
        // 1. ã‚«ãƒƒãƒ—æ•°ã®æ¡ä»¶ã‚’è¿½åŠ  (è¦æœ›â‘ )
        if (cup) {
            if (cup === "Lä»¥ä¸Š") {
                searchParams += `&bust=L`;
            } else {
                searchParams += `&bust=${cup}`; 
            }
        }
        
        // 3. èº«é•·ã®æ¡ä»¶ã‚’è¿½åŠ 
        if (heightMin) {
            searchParams += `&min_height=${heightMin}`;
        }
        if (heightMax) {
            searchParams += `&max_height=${heightMax}`;
        }
        
        // æœ€çµ‚çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆURL
        const requestUrl = `${API_ENDPOINT}?${keyParams}&${searchParams}`;

        // æ¤œç´¢çµæœã‚¨ãƒªã‚¢ã®è¡¨ç¤ºã‚’æ›´æ–°
        const resultDiv = document.querySelector('.actress-list');
        resultDiv.innerHTML = '<h2>æ¤œç´¢çµæœ</h2><p>ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­ã§ã™...</p>';

        // ã‚µãƒ¼ãƒãƒ¼ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ï¼
        fetch(requestUrl)
          .then(response => response.json())
          .then(data => {
            // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º (F12ã‚­ãƒ¼ã§ç¢ºèª)
            console.log("APIã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿:", data); 

            let filteredItems = data.result.items || [];
            
            // ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µã‚¤ãƒˆã«è¡¨ç¤ºã™ã‚‹å‡¦ç†
            resultDiv.innerHTML = `<h2>æ¤œç´¢çµæœ (${filteredItems.length}ä»¶è¡¨ç¤º - æ‰¿èªå¾…ã¡)</h2>`;
            
            if (filteredItems.length > 0) {
                 filteredItems.forEach(item => {
                     // ä»®ã§ã‚¿ã‚¤ãƒˆãƒ«ã¨ã€APIãŒæŒã£ã¦ã„ã‚‹ã‚«ãƒƒãƒ—æ•°ã‚’è¡¨ç¤º
                     const bustSize = item.sizes ? ` (B: ${item.sizes.bust})` : '';
                     resultDiv.innerHTML += `<div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 5px;">
                                                <p><strong>${item.title}</strong>${bustSize}</p>
                                                <p>APIæ‰¿èªå¾Œã€ã“ã“ã«è©³ç´°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                                             </div>`;
                 });
            } else {
                resultDiv.innerHTML += `<p>è©²å½“ã™ã‚‹å¥³å„ªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>`;
            }
          })
          .catch(error => {
            console.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
            resultDiv.innerHTML = '<h2>ã‚¨ãƒ©ãƒ¼</h2><p>APIã‚­ãƒ¼ã®èªè¨¼ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‹ã€FANZAã®æ‰¿èªå¾…ã¡ã§ã™ã€‚</p>';
          });
    }
    </script>
</body>
</html>
