<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥³å„ªåé‘‘ï¼ˆå­¦ç¿’ã‚µã‚¤ãƒˆï¼‰</title>

<style>
/* CSSã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã‹ã‚‰ */
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    padding: 0;
    background-color: #f4f4f4;
}

.search-area {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

.input-group {
    margin-bottom: 15px;
    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã«ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦è¨­å®š */
    display: block; 
}

.input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.input-group input[type="number"], .input-group select {
    padding: 8px;
    margin-right: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨ãƒ©ãƒ™ãƒ«ã®é…ç½®ã‚’èª¿æ•´ */
#cup-checkboxes input[type="checkbox"], 
#cup-checkboxes label {
    margin-right: 15px; /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
    display: inline-block;
}

#search-button {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

#search-button:hover {
    background-color: #0056b3;
}

/* â˜…â˜…â˜… ã“ã“ã‹ã‚‰æ¤œç´¢çµæœãƒªã‚¹ãƒˆã®æ–°ã—ã„CSSã§ã™ â˜…â˜…â˜… */
.actress-list {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.actress-item {
    padding: 15px;
    border-bottom: 1px solid #eee;
    margin-bottom: 15px;
    overflow: hidden; /* floatè§£é™¤ã®ãŸã‚ */
}

.actress-item h3 {
    margin-top: 0;
}
/* â˜…â˜…â˜… ã“ã“ã¾ã§æ–°ã—ã„CSSã§ã™ â˜…â˜…â˜… */
</style>

</head>
<body>
    <h1>å¥³å„ªåé‘‘ã‚µã‚¤ãƒˆã¸ã‚ˆã†ã“ãï¼</h1>
    <p>ã“ã®ã‚µã‚¤ãƒˆã¯ã€APIã‚’åˆ©ç”¨ã—ãŸå¥³å„ªæ¤œç´¢æ©Ÿèƒ½ã®å­¦ç¿’ç”¨ã‚µã‚¤ãƒˆã§ã™ã€‚</p>
    
    <div class="search-area">
        <h2>å¥³å„ªæ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ </h2>
        
        <div class="input-group">
            <label for="age">å¹´é½¢:</label>
            <input type="number" id="age_min" placeholder="æœ€ä½å¹´é½¢" min="18" style="width: 80px;">
            <span>ã€œ</span>
            <input type="number" id="age_max" placeholder="æœ€é«˜å¹´é½¢" min="18" style="width: 80px;">
        </div>

        <div class="input-group">
            <label for="height">èº«é•· (cm):</label>
            <input type="number" id="height_min" placeholder="æœ€ä½èº«é•·" min="100" max="200" style="width: 80px;">
            <span>ã€œ</span>
            <input type="number" id="height_max" placeholder="æœ€é«˜èº«é•·" min="100" max="200" style="width: 80px;">
        </div>
        
        <div class="input-group">
            <label>ã‚«ãƒƒãƒ—æ•° (è¤‡æ•°é¸æŠå¯):</label>
            <div id="cup-checkboxes" style="display: flex; flex-wrap: wrap;">
                <input type="checkbox" id="cup_A" name="cup" value="A"><label for="cup_A">A</label>
                <input type="checkbox" id="cup_B" name="cup" value="B"><label for="cup_B">B</label>
                <input type="checkbox" id="cup_C" name="cup" value="C"><label for="cup_C">C</label>
                <input type="checkbox" id="cup_D" name="cup" value="D"><label for="cup_D">D</label>
                <input type="checkbox" id="cup_E" name="cup" value="E"><label for="cup_E">E</label>
                <input type="checkbox" id="cup_F" name="cup" value="F"><label for="cup_F">F</label>
                <input type="checkbox" id="cup_G" name="cup" value="G"><label for="cup_G">G</label>
                <input type="checkbox" id="cup_H" name="cup" value="H"><label for="cup_H">H</label>
                <input type="checkbox" id="cup_I" name="cup" value="I"><label for="cup_I">I</label>
                <input type="checkbox" id="cup_J" name="cup" value="J"><label for="cup_J">J</label>
                <input type="checkbox" id="cup_K" name="cup" value="K"><label for="cup_K">K</label>
                <input type="checkbox" id="cup_L" name="cup" value="L"><label for="cup_L">L</label>
                <input type="checkbox" id="cup_L_over" name="cup" value="Lä»¥ä¸Š"><label for="cup_L_over">Lä»¥ä¸Š</label>
            </div>
        </div>
        
<div class="input-group">
    <label>ä½“å‹ (ç‹¬è‡ªã‚¿ã‚° - è¤‡æ•°é¸æŠå¯):</label>
    <div id="bodytype-checkboxes" style="display: flex; flex-wrap: wrap;">
        <input type="checkbox" id="body_slender" name="bodytype" value="ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼"><label for="body_slender" style="margin-right: 15px;">ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼</label>
        <input type="checkbox" id="body_average" name="bodytype" value="æ™®é€š"><label for="body_average" style="margin-right: 15px;">æ™®é€š</label>
        <input type="checkbox" id="body_glamour" name="bodytype" value="ã‚°ãƒ©ãƒãƒ¼"><label for="body_glamour" style="margin-right: 15px;">ã‚°ãƒ©ãƒãƒ¼</label>
        <input type="checkbox" id="body_petite" name="bodytype" value="å°æŸ„"><label for="body_petite" style="margin-right: 15px;">å°æŸ„</label>
        <input type="checkbox" id="body_athletic" name="bodytype" value="ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ"><label for="body_athletic" style="margin-right: 15px;">ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ</label>
    </div>
</div>

<div class="input-group">
    <label>ç³»çµ± (ç‹¬è‡ªã‚¿ã‚° - è¤‡æ•°é¸æŠå¯):</label>
    <div id="genre-checkboxes" style="display: flex; flex-wrap: wrap;">
        <input type="checkbox" id="genre_cute" name="genre" value="å¯æ„›ã„ç³»"><label for="genre_cute" style="margin-right: 15px;">å¯æ„›ã„ç³»</label>
        <input type="checkbox" id="genre_beautiful" name="genre" value="ç¾äººç³»"><label for="genre_beautiful" style="margin-right: 15px;">ç¾äººç³»</label>
        <input type="checkbox" id="genre_clean" name="genre" value="æ¸…æ¥šç³»"><label for="genre_clean" style="margin-right: 15px;">æ¸…æ¥šç³»</label>
        <input type="checkbox" id="genre_young" name="genre" value="å¹´ä¸‹ç³»"><label for="genre_young" style="margin-right: 15px;">å¹´ä¸‹ç³»</label>
        <input type="checkbox" id="genre_mature" name="genre" value="ãŠå§‰ã•ã‚“ç³»"><label for="genre_mature" style="margin-right: 15px;">ãŠå§‰ã•ã‚“ç³»</label>
    </div>
</div>
        </div>
        
        <button id="search-button" onclick="fetchActressData()">æ¤œç´¢ã™ã‚‹</button>
    </div>

  <hr>

<div class="actress-list">
    <h2>æ¤œç´¢çµæœ</h2>
    <div class="actress-item">
        <img src="placeholder.png" alt="å¥³å„ªã®å†™çœŸ" style="width: 100px; height: 100px; object-fit: cover; float: left; margin-right: 15px;">
        <h3>å¥³å„ªåï¼ˆä¾‹ï¼šçŸ³å· æ¾ªï¼‰</h3>
        <p><strong>ã‚¿ã‚°:</strong> #æ¸…æ¥šç³» #ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼</p>
        <a href="#">è©³ç´°ã‚’è¦‹ã‚‹</a> | <a href="#">ä½œå“ã‚’è¦‹ã‚‹</a>
        <div style="clear: both;"></div>
    </div>
    
    <div class="actress-item">
        <img src="placeholder.png" alt="å¥³å„ªã®å†™çœŸ" style="width: 100px; height: 100px; object-fit: cover; float: left; margin-right: 15px;">
        <h3>å¥³å„ªåï¼ˆä¾‹ï¼šæ²³åŒ— å½©ä¼½ï¼‰</h3>
        <p><strong>ã‚¿ã‚°:</strong> #ç¾äººç³» #Fã‚«ãƒƒãƒ—</p>
        <a href="#">è©³ç´°ã‚’è¦‹ã‚‹</a> | <a href="#">ä½œå“ã‚’è¦‹ã‚‹</a>
        <div style="clear: both;"></div>
    </div>
    
    <p id="loading-message">â†‘ç¾åœ¨ã€ä»®ã®ãƒ‡ãƒ¼ã‚¿ã§ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ç¢ºèªä¸­ã§ã™ã€‚APIæ‰¿èªã‚’å¾…ã£ã¦ã„ã¾ã™ã€‚</p>
</div>
<script>
    // -----------------------------------------------------------
    // ç‹¬è‡ªã®æ¤œç´¢ã‚¿ã‚°ç”¨ãƒ‡ãƒ¼ã‚¿ (è¦æœ›â‘¢, â‘£)
    // -----------------------------------------------------------
    const localActressData = [
        { name: "çŸ³å· æ¾ª", bodyType: "ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼", genre: ["å¯æ„›ã„ç³»", "æ¸…æ¥šç³»"] },
        { name: "æ²³åŒ— å½©ä¼½ï¼ˆæ²³åŒ— å½©èŠ±ï¼‰", bodyType: "ã‚¹ãƒ¬ãƒ³ãƒ€ãƒ¼", genre: ["ç¾äººç³»", "æ¸…æ¥šç³»"] },
        { name: "ç€¬æˆ¸ ç’°å¥ˆ", bodyType: "ã‚°ãƒ©ãƒãƒ¼", genre: ["æ¸…æ¥šç³»", "å¯æ„›ã„ç³»"] },
        // â˜…é‡è¦: ä»Šå¾Œã€ã‚ãªãŸã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®æƒ…å ±ã‚’ã“ã“ã«è¿½åŠ ã—ã¦ã„ãã¾ã™â˜…
    ];

    // -----------------------------------------------------------
    // æ¤œç´¢ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
    // -----------------------------------------------------------
    function fetchActressData() {
        // ğŸš¨ æ‰¿èªå¾Œã€ã“ã“ã‚’ã‚ãªãŸã®ã‚­ãƒ¼ã«ç½®ãæ›ãˆã¾ã™ ğŸš¨
        const CLIENT_ID = "[ã‚ãªãŸã®Client ID]"; 
        const AFFILIATE_ID = "[ã‚ãªãŸã®Affiliate ID]";
        
        // æ¤œç´¢æ¡ä»¶ã®å–å¾—
        const heightMin = document.getElementById('height_min').value;
        const heightMax = document.getElementById('height_max').value;
        const ageMin = document.getElementById('age_min').value;
        const ageMax = document.getElementById('age_max').value;
        
        // è¤‡æ•°é¸æŠã•ã‚ŒãŸã‚«ãƒƒãƒ—æ•°ã‚’å–å¾—
        const checkedCups = Array.from(document.querySelectorAll('input[name="cup"]:checked'))
                                 .map(checkbox => checkbox.value);

        // â˜…â˜…â˜… NEW: ç‹¬è‡ªã®ä½“å‹ãƒ»ç³»çµ±ã‚¿ã‚°ã‚’å–å¾— â˜…â˜…â˜…
        const checkedBodyTypes = Array.from(document.querySelectorAll('input[name="bodytype"]:checked'))
                                      .map(checkbox => checkbox.value);

        const checkedGenres = Array.from(document.querySelectorAll('input[name="genre"]:checked'))
                                   .map(checkbox => checkbox.value);
        // â˜…â˜…â˜… NEW END â˜…â˜…â˜…

        // FANZA APIã®åŸºæœ¬è¨­å®šã¨æ¤œç´¢æ¡ä»¶ã®çµ„ã¿ç«‹ã¦ (çœç•¥)
        // ... (çœç•¥: APIã‚­ãƒ¼ã€min_bust, min/max_heightã®çµ„ã¿ç«‹ã¦ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰å›ã¨åŒã˜)

        const API_ENDPOINT = "https://api.dmm.com/affiliate/v3/ItemList";
        const keyParams = `api_id=${CLIENT_ID}&affiliate_id=${AFFILIATE_ID}`;
        let searchParams = 'site=DMM.R18&service=digital&hits=50&sort=rank&keyword=å¥³å„ª';
        
        // ã‚«ãƒƒãƒ—æ•°ã®æ¡ä»¶ã‚’è¿½åŠ 
        if (checkedCups.length > 0) {
            const sortedCups = checkedCups.filter(c => c.length === 1).sort(); 
            let minCupForAPI = sortedCups.length > 0 ? sortedCups[0] : null;
            if (minCupForAPI) {
                searchParams += `&min_bust=${minCupForAPI}`; 
            }
        }
        
        // èº«é•·ã®æ¡ä»¶ã‚’è¿½åŠ 
        if (heightMin) { searchParams += `&min_height=${heightMin}`; }
        if (heightMax) { searchParams += `&max_height=${heightMax}`; }
        
        const requestUrl = `${API_ENDPOINT}?${keyParams}&${searchParams}`;

        const resultDiv = document.querySelector('.actress-list');
        resultDiv.innerHTML = '<h2>æ¤œç´¢çµæœ</h2><p>ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­ã§ã™...</p>';

        fetch(requestUrl)
          .then(response => response.json())
          .then(data => {
            let filteredItems = data.result.items || [];
            
            // â˜…â˜…â˜… NEW: ç‹¬è‡ªã®ã‚¿ã‚°ã¨ç…§åˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã™ â˜…â˜…â˜…
            filteredItems = applyLocalFilters(filteredItems, checkedBodyTypes, checkedGenres);
            // â˜…â˜…â˜… NEW END â˜…â˜…â˜…
            
            // ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µã‚¤ãƒˆã«è¡¨ç¤ºã™ã‚‹å‡¦ç†
            resultDiv.innerHTML = `<h2>æ¤œç´¢çµæœ (${filteredItems.length}ä»¶è¡¨ç¤º - æ‰¿èªå¾…ã¡/ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨)</h2>`;
            
            if (filteredItems.length > 0) {
                 filteredItems.forEach(item => {
                     // â˜…â˜…â˜… NEW: ç‹¬è‡ªã®ã‚¿ã‚°æƒ…å ±ã‚’è¡¨ç¤ºã«è¿½åŠ  â˜…â˜…â˜…
                     const localData = localActressData.find(d => d.name === item.title);
                     const localTags = localData ? `ã‚¿ã‚°: #${localData.bodyType} #${localData.genre.join(' #')}` : 'ã‚¿ã‚°: (ç‹¬è‡ªã‚¿ã‚°ãªã—)';
                     // â˜…â˜…â˜… NEW END â˜…â˜…â˜…

                     const bustSize = item.sizes ? ` (B: ${item.sizes.bust})` : '';
                     
                     // æ¤œç´¢çµæœã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å‹•çš„ã«ç”Ÿæˆ
                     resultDiv.innerHTML += `<div class="actress-item" style="border-bottom: 1px solid #eee; padding: 15px; margin-bottom: 15px; overflow: hidden;">
                                                <img src="placeholder.png" alt="${item.title}ã®å†™çœŸ" style="width: 100px; height: 100px; object-fit: cover; float: left; margin-right: 15px;">
                                                <h3>${item.title}</h3>
                                                <p><strong>${localTags}</strong></p>
                                                <a href="#">è©³ç´°ã‚’è¦‹ã‚‹</a> | <a href="#">ä½œå“ã‚’è¦‹ã‚‹</a>
                                                <div style="clear: both;"></div>
                                             </div>`;
                 });
            } else {
                resultDiv.innerHTML = `<h2>æ¤œç´¢çµæœ (0ä»¶)</h2><p>è©²å½“ã™ã‚‹å¥³å„ªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>`;
            }
          })
          .catch(error => {
            console.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
            resultDiv.innerHTML = '<h2>ã‚¨ãƒ©ãƒ¼</h2><p>APIã‚­ãƒ¼ã®èªè¨¼ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‹ã€FANZAã®æ‰¿èªå¾…ã¡ã§ã™ã€‚</p>';
          });
    }

    // â˜…â˜…â˜… NEW: ç‹¬è‡ªã®ã‚¿ã‚°ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯é–¢æ•° â˜…â˜…â˜…
    function applyLocalFilters(apiItems, bodyTypes, genres) {
        if (bodyTypes.length === 0 && genres.length === 0) {
            return apiItems;
        }

        return apiItems.filter(item => {
            // 1. ç‹¬è‡ªã‚¿ã‚°æƒ…å ±ã¨APIãƒ‡ãƒ¼ã‚¿ã‚’ç…§åˆ
            const localData = localActressData.find(d => d.name === item.title);
            
            // ç‹¬è‡ªã‚¿ã‚°æƒ…å ±ãŒãªã„å¥³å„ªã¯ã€å•ç­”ç„¡ç”¨ã§é™¤å¤–
            if (!localData) {
                return false;
            }

            // 2. ä½“å‹ãƒ•ã‚£ãƒ«ã‚¿ã®ãƒã‚§ãƒƒã‚¯
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½“å‹ã‚’é¸æŠã—ã¦ã„ãªã„å ´åˆã€ã“ã®ãƒ•ã‚£ãƒ«ã‚¿ã¯å¸¸ã«é€šé
            const passesBodyType = bodyTypes.length === 0 || bodyTypes.includes(localData.bodyType);

            // 3. ç³»çµ±ãƒ•ã‚£ãƒ«ã‚¿ã®ãƒã‚§ãƒƒã‚¯
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç³»çµ±ã‚’é¸æŠã—ã¦ã„ãªã„å ´åˆã€ã“ã®ãƒ•ã‚£ãƒ«ã‚¿ã¯å¸¸ã«é€šé
            const passesGenre = genres.length === 0 || 
                                genres.some(selectedGenre => localData.genre.includes(selectedGenre));
            
            // å…¨ã¦ã®ãƒ•ã‚£ãƒ«ã‚¿ã‚’é€šéã—ãŸå ´åˆã«ã®ã¿ã€trueã‚’è¿”ã™
            return passesBodyType && passesGenre;
        });
    }
    // â˜…â˜…â˜… NEW END â˜…â˜…â˜…
</script>
</body>
</html>


